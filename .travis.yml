language: julia

os:
  - linux
  - osx

julia:
  - release
  - nightly

branches:
  only:
    - master

matrix:
  allow_failures:
  # Julia release is 0.3.11, so we shouldn't expect to run on it.
    - julia: release

notifications:
  email: false

# uncomment the following lines to override the default test script
script:
 - if [[ -a .git/shallow ]]; then git fetch --unshallow; fi
 - julia --check-bounds=yes -e 'Pkg.clone(pwd());'
 - git clone https://psl-travis-user@github.com/IntelLabs/CompilerTools.jl.git # Pull in CompilerTools dependency
 - julia --check-bounds=yes -e 'Pkg.build("ParallelAccelerator"); Pkg.test("ParallelAccelerator"; coverage=true)'
